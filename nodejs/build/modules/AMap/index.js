'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _axios = _interopRequireDefault(require("axios"));

var _jsonfile = _interopRequireDefault(require("jsonfile"));

var _Utils = _interopRequireDefault(require("./../Utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const aMapKey = 'fc3a1a6cbfe82ef7055e5f8b26c04f60';

const http = _axios.default.create({
  baseURL: '',
  headers: {
    'User-Agent': 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; 360SE)'
  }
});

class AMap {
  static async getAMapDistrictInfo(keyword, filter) {
    const districts = [];
    const params = {
      keywords: keyword,
      extensions: 'all',
      // level: 'district',
      s: 'rsv3',
      output: 'json',
      key: aMapKey
    };

    if (filter) {
      params['filter'] = filter;
    }

    const data = await http.get('https://restapi.amap.com/v3/config/district', {
      params
    }).then(res => {
      return res.data['districts'];
    });

    for await (const item of data) {
      districts.push(item);
    }

    return districts;
  }

  static async polyLine2GeoJson(polyLine = '') {
    const geoJson = {
      type: 'MultiPolygon'
    };

    if (polyLine) {
      const lines = polyLine.split('|');
      const paths = [];
      lines.forEach(line => {
        const points = line.split(';');
        const path = [];
        points.forEach(point => {
          const pointArr = point.split(',');
          const lat = +pointArr[0];
          const lon = +pointArr[1];
          path.push([lat, lon]);
        });
        paths.push([path]);
      });
      geoJson.coordinates = paths;
    } else {
      geoJson.coordinates = [];
    }

    return geoJson;
  }

  static async getProvinces(fallback) {
    const list = await _jsonfile.default.readFileSync(`${__dirname}/provinces.json`);

    for await (const item of list) {
      await _Utils.default.call(`获取 [${item.name}] 数据`, this.getProvince.bind(this), [item, fallback]);
    }
  }

  static async getProvince(item, fallback) {
    await fallback(item);
  }

  static async loadProvinces(fallback) {
    const list = await _jsonfile.default.readFileSync(`${__dirname}/provinces.json`);

    for await (const item of list) {
      await _Utils.default.call(`加载 [${item.name}] 数据`, this.loadProvince.bind(this), [item, fallback]);
    }
  }

  static async loadProvince(item, fallback) {
    const data = await this.getAMapDistrictInfo(item['name']);
    const feature = data[0];
    let polyLine = '';

    if (feature && feature.polyline) {
      polyLine = feature.polyline;
    }

    const geoJson = await this.polyLine2GeoJson(polyLine); // index, zhName, level, parentIndex, iso, geoJson

    const params = [item.id, feature.name, 2, 1, '', geoJson];
    await fallback(...params);
  }

  static async loadChina(fallback) {
    const data = await this.getAMapDistrictInfo('中国');
    const feature = data[0];
    let polyLine = '';

    if (feature && feature.polyline) {
      polyLine = feature.polyline;
    }

    const geoJson = await this.polyLine2GeoJson(polyLine); // index, zhName, level, parentIndex, iso, geoJson

    const params = [1, feature.name, 1, 0, 'CHN', geoJson];
    await fallback(...params);
  }

}

var _default = AMap;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tb2R1bGVzL0FNYXAvaW5kZXguanMiXSwibmFtZXMiOlsiYU1hcEtleSIsImh0dHAiLCJBeGlvcyIsImNyZWF0ZSIsImJhc2VVUkwiLCJoZWFkZXJzIiwiQU1hcCIsImdldEFNYXBEaXN0cmljdEluZm8iLCJrZXl3b3JkIiwiZmlsdGVyIiwiZGlzdHJpY3RzIiwicGFyYW1zIiwia2V5d29yZHMiLCJleHRlbnNpb25zIiwicyIsIm91dHB1dCIsImtleSIsImRhdGEiLCJnZXQiLCJ0aGVuIiwicmVzIiwiaXRlbSIsInB1c2giLCJwb2x5TGluZTJHZW9Kc29uIiwicG9seUxpbmUiLCJnZW9Kc29uIiwidHlwZSIsImxpbmVzIiwic3BsaXQiLCJwYXRocyIsImZvckVhY2giLCJsaW5lIiwicG9pbnRzIiwicGF0aCIsInBvaW50IiwicG9pbnRBcnIiLCJsYXQiLCJsb24iLCJjb29yZGluYXRlcyIsImdldFByb3ZpbmNlcyIsImZhbGxiYWNrIiwibGlzdCIsIkpzb25GaWxlIiwicmVhZEZpbGVTeW5jIiwiX19kaXJuYW1lIiwiVXRpbHMiLCJjYWxsIiwibmFtZSIsImdldFByb3ZpbmNlIiwiYmluZCIsImxvYWRQcm92aW5jZXMiLCJsb2FkUHJvdmluY2UiLCJmZWF0dXJlIiwicG9seWxpbmUiLCJpZCIsImxvYWRDaGluYSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUFFQTs7QUFDQTs7QUFFQTs7OztBQUVBLE1BQU1BLE9BQU8sR0FBRyxrQ0FBaEI7O0FBR0EsTUFBTUMsSUFBSSxHQUFHQyxlQUFNQyxNQUFOLENBQWE7QUFDeEJDLEVBQUFBLE9BQU8sRUFBRSxFQURlO0FBRXhCQyxFQUFBQSxPQUFPLEVBQUU7QUFDUCxrQkFBYztBQURQO0FBRmUsQ0FBYixDQUFiOztBQU9BLE1BQU1DLElBQU4sQ0FBVztBQUVULGVBQWFDLG1CQUFiLENBQWlDQyxPQUFqQyxFQUEwQ0MsTUFBMUMsRUFBa0Q7QUFDaEQsVUFBTUMsU0FBUyxHQUFHLEVBQWxC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RUFBZjs7QUFDQSxRQUFJNEIsT0FBTyxJQUFJQSxPQUFPLENBQUNDLFFBQXZCLEVBQWlDO0FBQy9CN0IsTUFBQUEsUUFBUSxHQUFHNEIsT0FBTyxDQUFDQyxRQUFuQjtBQUNEOztBQUNELFVBQU01QixPQUFPLEdBQUcsTUFBTSxLQUFLRixnQkFBTCxDQUFzQkMsUUFBdEIsQ0FBdEIsQ0FQK0IsQ0FTL0I7O0FBQ0EsVUFBTWIsTUFBTSxHQUFHLENBQUMsQ0FBRCxFQUFJeUMsT0FBTyxDQUFDTCxJQUFaLEVBQWtCLENBQWxCLEVBQXFCLENBQXJCLEVBQXdCLEtBQXhCLEVBQStCdEIsT0FBL0IsQ0FBZjtBQUNBLFVBQU1lLFFBQVEsQ0FBQyxHQUFHN0IsTUFBSixDQUFkO0FBQ0Q7O0FBcEdROztlQXdHSUwsSSIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBKc29uRmlsZSBmcm9tICdqc29uZmlsZSc7XG5cbmltcG9ydCBVdGlscyBmcm9tICcuLy4uL1V0aWxzJztcblxuY29uc3QgYU1hcEtleSA9ICdmYzNhMWE2Y2JmZTgyZWY3MDU1ZTVmOGIyNmMwNGY2MCc7XG5cblxuY29uc3QgaHR0cCA9IEF4aW9zLmNyZWF0ZSh7XG4gIGJhc2VVUkw6ICcnLFxuICBoZWFkZXJzOiB7XG4gICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgNy4wOyBXaW5kb3dzIE5UIDUuMTsgMzYwU0UpJ1xuICB9XG59KTtcblxuY2xhc3MgQU1hcCB7XG5cbiAgc3RhdGljIGFzeW5jIGdldEFNYXBEaXN0cmljdEluZm8oa2V5d29yZCwgZmlsdGVyKSB7XG4gICAgY29uc3QgZGlzdHJpY3RzID0gW107XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAga2V5d29yZHM6IGtleXdvcmQsXG4gICAgICBleHRlbnNpb25zOiAnYWxsJyxcbiAgICAgIC8vIGxldmVsOiAnZGlzdHJpY3QnLFxuICAgICAgczogJ3JzdjMnLFxuICAgICAgb3V0cHV0OiAnanNvbicsXG4gICAgICBrZXk6IGFNYXBLZXlcbiAgICB9O1xuICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgIHBhcmFtc1snZmlsdGVyJ10gPSBmaWx0ZXI7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBodHRwXG4gICAgICAuZ2V0KCdodHRwczovL3Jlc3RhcGkuYW1hcC5jb20vdjMvY29uZmlnL2Rpc3RyaWN0Jywge1xuICAgICAgICBwYXJhbXNcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICByZXR1cm4gcmVzLmRhdGFbJ2Rpc3RyaWN0cyddO1xuICAgICAgfSlcbiAgICA7XG4gICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGRhdGEpIHtcbiAgICAgIGRpc3RyaWN0cy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gZGlzdHJpY3RzO1xuICB9XG5cblxuICBzdGF0aWMgYXN5bmMgcG9seUxpbmUyR2VvSnNvbihwb2x5TGluZSA9ICcnKSB7XG4gICAgY29uc3QgZ2VvSnNvbiA9IHtcbiAgICAgIHR5cGU6ICdNdWx0aVBvbHlnb24nXG4gICAgfTtcbiAgICBpZiAocG9seUxpbmUpIHtcbiAgICAgIGNvbnN0IGxpbmVzID0gcG9seUxpbmUuc3BsaXQoJ3wnKTtcbiAgICAgIGNvbnN0IHBhdGhzID0gW107XG4gICAgICBsaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgICBjb25zdCBwb2ludHMgPSBsaW5lLnNwbGl0KCc7Jyk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBbXTtcbiAgICAgICAgcG9pbnRzLmZvckVhY2gocG9pbnQgPT4ge1xuICAgICAgICAgIGNvbnN0IHBvaW50QXJyID0gcG9pbnQuc3BsaXQoJywnKTtcbiAgICAgICAgICBjb25zdCBsYXQgPSArcG9pbnRBcnJbMF07XG4gICAgICAgICAgY29uc3QgbG9uID0gK3BvaW50QXJyWzFdO1xuICAgICAgICAgIHBhdGgucHVzaChbbGF0LCBsb25dKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHBhdGhzLnB1c2goW3BhdGhdKTtcbiAgICAgIH0pO1xuICAgICAgZ2VvSnNvbi5jb29yZGluYXRlcyA9IHBhdGhzO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW9Kc29uLmNvb3JkaW5hdGVzID0gW107XG4gICAgfVxuICAgIHJldHVybiBnZW9Kc29uO1xuICB9XG5cblxuICBzdGF0aWMgYXN5bmMgZ2V0UHJvdmluY2VzKGZhbGxiYWNrKSB7XG4gICAgY29uc3QgbGlzdCA9IGF3YWl0IEpzb25GaWxlLnJlYWRGaWxlU3luYyhgJHtfX2Rpcm5hbWV9L3Byb3ZpbmNlcy5qc29uYCk7XG4gICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGxpc3QpIHtcbiAgICAgIGF3YWl0IFV0aWxzLmNhbGwoYOiOt+WPliBbJHtpdGVtLm5hbWV9XSDmlbDmja5gLCB0aGlzLmdldFByb3ZpbmNlLmJpbmQodGhpcyksIFtpdGVtLCBmYWxsYmFja10pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRQcm92aW5jZShpdGVtLCBmYWxsYmFjaykge1xuICAgIGF3YWl0IGZhbGxiYWNrKGl0ZW0pO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGxvYWRQcm92aW5jZXMoZmFsbGJhY2spIHtcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgSnNvbkZpbGUucmVhZEZpbGVTeW5jKGAke19fZGlybmFtZX0vcHJvdmluY2VzLmpzb25gKTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgbGlzdCkge1xuICAgICAgYXdhaXQgVXRpbHMuY2FsbChg5Yqg6L29IFske2l0ZW0ubmFtZX1dIOaVsOaNrmAsIHRoaXMubG9hZFByb3ZpbmNlLmJpbmQodGhpcyksIFtpdGVtLCBmYWxsYmFja10pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBsb2FkUHJvdmluY2UoaXRlbSwgZmFsbGJhY2spIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5nZXRBTWFwRGlzdHJpY3RJbmZvKGl0ZW1bJ25hbWUnXSk7XG4gICAgY29uc3QgZmVhdHVyZSA9IGRhdGFbMF07XG4gICAgbGV0IHBvbHlMaW5lID0gJyc7XG4gICAgaWYgKGZlYXR1cmUgJiYgZmVhdHVyZS5wb2x5bGluZSkge1xuICAgICAgcG9seUxpbmUgPSBmZWF0dXJlLnBvbHlsaW5lO1xuICAgIH1cbiAgICBjb25zdCBnZW9Kc29uID0gYXdhaXQgdGhpcy5wb2x5TGluZTJHZW9Kc29uKHBvbHlMaW5lKTtcblxuICAgIC8vIGluZGV4LCB6aE5hbWUsIGxldmVsLCBwYXJlbnRJbmRleCwgaXNvLCBnZW9Kc29uXG4gICAgY29uc3QgcGFyYW1zID0gW2l0ZW0uaWQsIGZlYXR1cmUubmFtZSwgMiwgMSwgJycsIGdlb0pzb25dO1xuICAgIGF3YWl0IGZhbGxiYWNrKC4uLnBhcmFtcyk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9hZENoaW5hKGZhbGxiYWNrKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZ2V0QU1hcERpc3RyaWN0SW5mbygn5Lit5Zu9Jyk7XG4gICAgY29uc3QgZmVhdHVyZSA9IGRhdGFbMF07XG4gICAgbGV0IHBvbHlMaW5lID0gJyc7XG4gICAgaWYgKGZlYXR1cmUgJiYgZmVhdHVyZS5wb2x5bGluZSkge1xuICAgICAgcG9seUxpbmUgPSBmZWF0dXJlLnBvbHlsaW5lO1xuICAgIH1cbiAgICBjb25zdCBnZW9Kc29uID0gYXdhaXQgdGhpcy5wb2x5TGluZTJHZW9Kc29uKHBvbHlMaW5lKTtcblxuICAgIC8vIGluZGV4LCB6aE5hbWUsIGxldmVsLCBwYXJlbnRJbmRleCwgaXNvLCBnZW9Kc29uXG4gICAgY29uc3QgcGFyYW1zID0gWzEsIGZlYXR1cmUubmFtZSwgMSwgMCwgJ0NITicsIGdlb0pzb25dO1xuICAgIGF3YWl0IGZhbGxiYWNrKC4uLnBhcmFtcyk7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBBTWFwOyJdfQ==