'use strict';

var _modules = _interopRequireDefault(require("./../../modules"));

var _LibTopology = _interopRequireDefault(require("./LibTopology"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(async () => {
  const pg = await _modules.default.PgSQL.client('localhost');
  const lineDumpSchema = 'topo';
  const lineDumpTable = 'line_dump';
  const lineTopoSchema = 'topo';
  const lineTopoTable = 'line_topo';
  const topology = new _LibTopology.default(lineDumpSchema, lineDumpTable, lineTopoSchema, lineTopoTable);
  await _modules.default.Utils.call(`外国 海岸边界线`, async () => {
    const list = await _LibTopology.default.getForeignList(pg);

    for await (const item of list) {
      const id = +item['id'];
      const name = item['name'];
      await _modules.default.Utils.call(`${name}#${id} 海岸边界线`, topology.dumpCoastline.bind(topology), [pg, id]);
    }
  });
  await _modules.default.Utils.call(`中国 海岸边界线`, async () => {
    const id = 1;
    const name = '中国';
    await _modules.default.Utils.call(`${name}#${id} 海岸边界线`, topology.dumpCoastline.bind(topology), [pg, id]);
  });
  await pg.release();
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90YXNrcy8wNS10b3BvbG9neS8wMS1kdW1wLWNvYXN0bGluZS5qcyJdLCJuYW1lcyI6WyJwZyIsIiQiLCJQZ1NRTCIsImNsaWVudCIsImxpbmVEdW1wU2NoZW1hIiwibGluZUR1bXBUYWJsZSIsImxpbmVUb3BvU2NoZW1hIiwibGluZVRvcG9UYWJsZSIsInRvcG9sb2d5IiwiTGliVG9wb2xvZ3kiLCJVdGlscyIsImNhbGwiLCJsaXN0IiwiZ2V0Rm9yZWlnbkxpc3QiLCJpdGVtIiwiaWQiLCJuYW1lIiwiZHVtcENvYXN0bGluZSIsImJpbmQiLCJyZWxlYXNlIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFHQTs7QUFFQTs7OztBQUdBLENBQUMsWUFBWTtBQUNYLFFBQU1BLEVBQUUsR0FBRyxNQUFNQyxpQkFBRUMsS0FBRixDQUFRQyxNQUFSLENBQWUsV0FBZixDQUFqQjtBQUVBLFFBQU1DLGNBQWMsR0FBRyxNQUF2QjtBQUNBLFFBQU1DLGFBQWEsR0FBRyxXQUF0QjtBQUNBLFFBQU1DLGNBQWMsR0FBRyxNQUF2QjtBQUNBLFFBQU1DLGFBQWEsR0FBRyxXQUF0QjtBQUNBLFFBQU1DLFFBQVEsR0FBRyxJQUFJQyxvQkFBSixDQUFnQkwsY0FBaEIsRUFBZ0NDLGFBQWhDLEVBQStDQyxjQUEvQyxFQUErREMsYUFBL0QsQ0FBakI7QUFFQSxRQUFNTixpQkFBRVMsS0FBRixDQUFRQyxJQUFSLENBQWMsVUFBZCxFQUF5QixZQUFZO0FBQ3pDLFVBQU1DLElBQUksR0FBRyxNQUFNSCxxQkFBWUksY0FBWixDQUEyQmIsRUFBM0IsQ0FBbkI7O0FBQ0EsZUFBVyxNQUFNYyxJQUFqQixJQUF5QkYsSUFBekIsRUFBK0I7QUFDN0IsWUFBTUcsRUFBRSxHQUFHLENBQUNELElBQUksQ0FBQyxJQUFELENBQWhCO0FBQ0EsWUFBTUUsSUFBSSxHQUFHRixJQUFJLENBQUMsTUFBRCxDQUFqQjtBQUNBLFlBQU1iLGlCQUFFUyxLQUFGLENBQVFDLElBQVIsQ0FBYyxHQUFFSyxJQUFLLElBQUdELEVBQUcsUUFBM0IsRUFBb0NQLFFBQVEsQ0FBQ1MsYUFBVCxDQUF1QkMsSUFBdkIsQ0FBNEJWLFFBQTVCLENBQXBDLEVBQTJFLENBQUNSLEVBQUQsRUFBS2UsRUFBTCxDQUEzRSxDQUFOO0FBQ0Q7QUFDRixHQVBLLENBQU47QUFTQSxRQUFNZCxpQkFBRVMsS0FBRixDQUFRQyxJQUFSLENBQWMsVUFBZCxFQUF5QixZQUFZO0FBQ3pDLFVBQU1JLEVBQUUsR0FBRyxDQUFYO0FBQ0EsVUFBTUMsSUFBSSxHQUFHLElBQWI7QUFDQSxVQUFNZixpQkFBRVMsS0FBRixDQUFRQyxJQUFSLENBQWMsR0FBRUssSUFBSyxJQUFHRCxFQUFHLFFBQTNCLEVBQW9DUCxRQUFRLENBQUNTLGFBQVQsQ0FBdUJDLElBQXZCLENBQTRCVixRQUE1QixDQUFwQyxFQUEyRSxDQUFDUixFQUFELEVBQUtlLEVBQUwsQ0FBM0UsQ0FBTjtBQUNELEdBSkssQ0FBTjtBQU9BLFFBQU1mLEVBQUUsQ0FBQ21CLE9BQUgsRUFBTjtBQUNELENBMUJEIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5cbmltcG9ydCAkIGZyb20gJy4vLi4vLi4vbW9kdWxlcyc7XG5cbmltcG9ydCBMaWJUb3BvbG9neSBmcm9tICcuL0xpYlRvcG9sb2d5JztcblxuXG4oYXN5bmMgKCkgPT4ge1xuICBjb25zdCBwZyA9IGF3YWl0ICQuUGdTUUwuY2xpZW50KCdsb2NhbGhvc3QnKTtcblxuICBjb25zdCBsaW5lRHVtcFNjaGVtYSA9ICd0b3BvJztcbiAgY29uc3QgbGluZUR1bXBUYWJsZSA9ICdsaW5lX2R1bXAnO1xuICBjb25zdCBsaW5lVG9wb1NjaGVtYSA9ICd0b3BvJztcbiAgY29uc3QgbGluZVRvcG9UYWJsZSA9ICdsaW5lX3RvcG8nO1xuICBjb25zdCB0b3BvbG9neSA9IG5ldyBMaWJUb3BvbG9neShsaW5lRHVtcFNjaGVtYSwgbGluZUR1bXBUYWJsZSwgbGluZVRvcG9TY2hlbWEsIGxpbmVUb3BvVGFibGUpO1xuXG4gIGF3YWl0ICQuVXRpbHMuY2FsbChg5aSW5Zu9IOa1t+WyuOi+ueeVjOe6v2AsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgTGliVG9wb2xvZ3kuZ2V0Rm9yZWlnbkxpc3QocGcpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiBsaXN0KSB7XG4gICAgICBjb25zdCBpZCA9ICtpdGVtWydpZCddO1xuICAgICAgY29uc3QgbmFtZSA9IGl0ZW1bJ25hbWUnXTtcbiAgICAgIGF3YWl0ICQuVXRpbHMuY2FsbChgJHtuYW1lfSMke2lkfSDmtbflsrjovrnnlYznur9gLCB0b3BvbG9neS5kdW1wQ29hc3RsaW5lLmJpbmQodG9wb2xvZ3kpLCBbcGcsIGlkXSk7XG4gICAgfVxuICB9KTtcblxuICBhd2FpdCAkLlV0aWxzLmNhbGwoYOS4reWbvSDmtbflsrjovrnnlYznur9gLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgaWQgPSAxO1xuICAgIGNvbnN0IG5hbWUgPSAn5Lit5Zu9JztcbiAgICBhd2FpdCAkLlV0aWxzLmNhbGwoYCR7bmFtZX0jJHtpZH0g5rW35bK46L6555WM57q/YCwgdG9wb2xvZ3kuZHVtcENvYXN0bGluZS5iaW5kKHRvcG9sb2d5KSwgW3BnLCBpZF0pO1xuICB9KTtcblxuXG4gIGF3YWl0IHBnLnJlbGVhc2UoKTtcbn0pKCk7Il19