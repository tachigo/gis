'use strict';

var _modules = _interopRequireDefault(require("./../../modules"));

var _LibTopoLine = _interopRequireDefault(require("./LibTopoLine"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(async () => {
  const pg = await _modules.default.PgSQL.client('localhost');
  const topologyName = 'line_topo';
  const dumpTable = 'line_dump';
  const topoTable = 'line_topo';
  const schema = 'topo';
  const topology = new _LibTopoLine.default(topologyName, dumpTable, topoTable, schema);
  await _modules.default.Utils.call(`外国 海岸边界线`, async () => {
    const list = await _LibTopoLine.default.getForeignList(pg);

    for await (const item of list) {
      const id = +item['id'];
      const name = item['name'];
      await _modules.default.Utils.call(`${name}#${id} 海岸边界线`, topology.dumpCoastlineAvgVertices.bind(topology), [pg, id]);
    }
  });
  await _modules.default.Utils.call(`中国 海岸边界线`, async () => {
    const id = 1;
    const name = '中国';
    await _modules.default.Utils.call(`${name}#${id} 海岸边界线`, topology.dumpCoastlineAvgVertices.bind(topology), [pg, id]);
  });
  await pg.release();
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90YXNrcy8wNC10b3BvLWxpbmUvMDItZHVtcC1jb2FzdGxpbmUuanMiXSwibmFtZXMiOlsicGciLCIkIiwiUGdTUUwiLCJjbGllbnQiLCJ0b3BvbG9neU5hbWUiLCJkdW1wVGFibGUiLCJ0b3BvVGFibGUiLCJzY2hlbWEiLCJ0b3BvbG9neSIsIkxpYlRvcG9MaW5lIiwiVXRpbHMiLCJjYWxsIiwibGlzdCIsImdldEZvcmVpZ25MaXN0IiwiaXRlbSIsImlkIiwibmFtZSIsImR1bXBDb2FzdGxpbmVBdmdWZXJ0aWNlcyIsImJpbmQiLCJyZWxlYXNlIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFHQTs7QUFFQTs7OztBQUdBLENBQUMsWUFBWTtBQUNYLFFBQU1BLEVBQUUsR0FBRyxNQUFNQyxpQkFBRUMsS0FBRixDQUFRQyxNQUFSLENBQWUsV0FBZixDQUFqQjtBQUNBLFFBQU1DLFlBQVksR0FBRyxXQUFyQjtBQUNBLFFBQU1DLFNBQVMsR0FBRyxXQUFsQjtBQUNBLFFBQU1DLFNBQVMsR0FBRyxXQUFsQjtBQUNBLFFBQU1DLE1BQU0sR0FBRyxNQUFmO0FBQ0EsUUFBTUMsUUFBUSxHQUFHLElBQUlDLG9CQUFKLENBQWdCTCxZQUFoQixFQUE4QkMsU0FBOUIsRUFBeUNDLFNBQXpDLEVBQW9EQyxNQUFwRCxDQUFqQjtBQUVBLFFBQU1OLGlCQUFFUyxLQUFGLENBQVFDLElBQVIsQ0FBYyxVQUFkLEVBQXlCLFlBQVk7QUFDekMsVUFBTUMsSUFBSSxHQUFHLE1BQU1ILHFCQUFZSSxjQUFaLENBQTJCYixFQUEzQixDQUFuQjs7QUFDQSxlQUFXLE1BQU1jLElBQWpCLElBQXlCRixJQUF6QixFQUErQjtBQUM3QixZQUFNRyxFQUFFLEdBQUcsQ0FBQ0QsSUFBSSxDQUFDLElBQUQsQ0FBaEI7QUFDQSxZQUFNRSxJQUFJLEdBQUdGLElBQUksQ0FBQyxNQUFELENBQWpCO0FBQ0EsWUFBTWIsaUJBQUVTLEtBQUYsQ0FBUUMsSUFBUixDQUFjLEdBQUVLLElBQUssSUFBR0QsRUFBRyxRQUEzQixFQUFvQ1AsUUFBUSxDQUFDUyx3QkFBVCxDQUFrQ0MsSUFBbEMsQ0FBdUNWLFFBQXZDLENBQXBDLEVBQXNGLENBQUNSLEVBQUQsRUFBS2UsRUFBTCxDQUF0RixDQUFOO0FBQ0Q7QUFDRixHQVBLLENBQU47QUFTQSxRQUFNZCxpQkFBRVMsS0FBRixDQUFRQyxJQUFSLENBQWMsVUFBZCxFQUF5QixZQUFZO0FBQ3pDLFVBQU1JLEVBQUUsR0FBRyxDQUFYO0FBQ0EsVUFBTUMsSUFBSSxHQUFHLElBQWI7QUFDQSxVQUFNZixpQkFBRVMsS0FBRixDQUFRQyxJQUFSLENBQWMsR0FBRUssSUFBSyxJQUFHRCxFQUFHLFFBQTNCLEVBQW9DUCxRQUFRLENBQUNTLHdCQUFULENBQWtDQyxJQUFsQyxDQUF1Q1YsUUFBdkMsQ0FBcEMsRUFBc0YsQ0FBQ1IsRUFBRCxFQUFLZSxFQUFMLENBQXRGLENBQU47QUFDRCxHQUpLLENBQU47QUFPQSxRQUFNZixFQUFFLENBQUNtQixPQUFILEVBQU47QUFDRCxDQXpCRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuXG5pbXBvcnQgJCBmcm9tICcuLy4uLy4uL21vZHVsZXMnO1xuXG5pbXBvcnQgTGliVG9wb0xpbmUgZnJvbSAnLi9MaWJUb3BvTGluZSc7XG5cblxuKGFzeW5jICgpID0+IHtcbiAgY29uc3QgcGcgPSBhd2FpdCAkLlBnU1FMLmNsaWVudCgnbG9jYWxob3N0Jyk7XG4gIGNvbnN0IHRvcG9sb2d5TmFtZSA9ICdsaW5lX3RvcG8nO1xuICBjb25zdCBkdW1wVGFibGUgPSAnbGluZV9kdW1wJztcbiAgY29uc3QgdG9wb1RhYmxlID0gJ2xpbmVfdG9wbyc7XG4gIGNvbnN0IHNjaGVtYSA9ICd0b3BvJztcbiAgY29uc3QgdG9wb2xvZ3kgPSBuZXcgTGliVG9wb0xpbmUodG9wb2xvZ3lOYW1lLCBkdW1wVGFibGUsIHRvcG9UYWJsZSwgc2NoZW1hKTtcblxuICBhd2FpdCAkLlV0aWxzLmNhbGwoYOWkluWbvSDmtbflsrjovrnnlYznur9gLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbGlzdCA9IGF3YWl0IExpYlRvcG9MaW5lLmdldEZvcmVpZ25MaXN0KHBnKTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgbGlzdCkge1xuICAgICAgY29uc3QgaWQgPSAraXRlbVsnaWQnXTtcbiAgICAgIGNvbnN0IG5hbWUgPSBpdGVtWyduYW1lJ107XG4gICAgICBhd2FpdCAkLlV0aWxzLmNhbGwoYCR7bmFtZX0jJHtpZH0g5rW35bK46L6555WM57q/YCwgdG9wb2xvZ3kuZHVtcENvYXN0bGluZUF2Z1ZlcnRpY2VzLmJpbmQodG9wb2xvZ3kpLCBbcGcsIGlkXSk7XG4gICAgfVxuICB9KTtcblxuICBhd2FpdCAkLlV0aWxzLmNhbGwoYOS4reWbvSDmtbflsrjovrnnlYznur9gLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgaWQgPSAxO1xuICAgIGNvbnN0IG5hbWUgPSAn5Lit5Zu9JztcbiAgICBhd2FpdCAkLlV0aWxzLmNhbGwoYCR7bmFtZX0jJHtpZH0g5rW35bK46L6555WM57q/YCwgdG9wb2xvZ3kuZHVtcENvYXN0bGluZUF2Z1ZlcnRpY2VzLmJpbmQodG9wb2xvZ3kpLCBbcGcsIGlkXSk7XG4gIH0pO1xuXG5cbiAgYXdhaXQgcGcucmVsZWFzZSgpO1xufSkoKTsiXX0=